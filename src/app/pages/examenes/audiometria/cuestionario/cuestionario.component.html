<mdb-progress-bar *ngIf="disabled" class="progress primary-color-dark" mode="indeterminate"></mdb-progress-bar>

    <div class="container">


        <div class="row mt-4">

            <div class="col-xs-12 col-sm-12">

                <div class="titulo_seccion">CUESTIONARIO Y EXÁMEN PRE AUDIOMÉTRICO</div>
                
            </div>
        </div>


        <div class="row">

            <div class="col-md-6">
                <table class="table table-sm ">
                    <thead>
                        <tr class="mdb-color darken-3 white-text">
                            <th class="text-center">Antecedentes Relacionados</th>
                            <th style="width: 10%" class="text-center">Si</th>
                            <th style="width: 10%" class="text-center">No</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let item of registro.antecedentes; let i = index">
                            <td>
                              {{ item.nombre_antecedente }}
                            </td>
                            <td class="text-center"  *ngFor="let radio of options_si_no; let j = index">
                                <div class="custom-control custom-radio">
                                    <input type="radio" class="custom-control-input" id="q1_{{ i }}_{{ j }}" name="q1_{{ i }}" [(ngModel)]="item.respuesta" [value]="radio.value" mdbInput>
                                    <label class="custom-control-label" for="q1_{{ i }}_{{ j }}"></label>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="col-md-6">
                <table class="table table-sm ">
                    <thead>
                        <tr class="mdb-color darken-3 white-text">
                            <th class="text-center">Sintomas Actuales</th>
                            <th style="width: 10%" class="text-center">Si</th>
                            <th style="width: 10%" class="text-center">No</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let item of registro.sintomas; let i = index">
                            <td>
                              {{ item.nombre_sintoma }}
                            </td>
                            <td class="text-center"  *ngFor="let radio of options_si_no; let j = index">
                                <div class="custom-control custom-radio">
                                    <input type="radio" class="custom-control-input" id="q5_{{ i }}_{{ j }}" name="q5_{{ i }}" [(ngModel)]="item.respuesta" [value]="radio.value" mdbInput>
                                    <label class="custom-control-label" for="q5_{{ i }}_{{ j }}"></label>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="row mt-3">

            <div class="col-md-12">

                <table class="table table-sm">
                    <thead>
                        <tr class="mdb-color darken-3 white-text">
                            <th class="text-center">Antecedentes otorrinológicos</th>
                            <th style="width: 10%" class="text-center">Si</th>
                            <th style="width: 10%" class="text-center">No</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let item of registro.antecedentes2; let i = index">
                            <td>
                              {{ item.nombre_antecedente }}
                            </td>
                            <td class="text-center"  *ngFor="let radio of options_si_no; let j = index">
                                <div class="custom-control custom-radio">
                                    <input type="radio" class="custom-control-input" id="q6_{{ i }}_{{ j }}" name="q6_{{ i }}" [(ngModel)]="item.respuesta" [value]="radio.value" mdbInput>
                                    <label class="custom-control-label" for="q6_{{ i }}_{{ j }}"></label>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

        </div>

        <div class="row">

            <div class="col-xs-12 col-sm-12">

                <div class="titulo_seccion">EXPOSICIÓN PREVIA</div>

                <div class="form-row">
                    <div class="col-md-6">
                        <div class="row">
                            <div class="col-md-6">
                                <span class="label_radio">Exposición previa a Ruido</span>
                            </div>
                            <div class="col-md-6 radio_option">
                                <div class="custom-control custom-radio " *ngFor="let item of options_ruido_exposicion; let i = index">
                                    <input type="radio" class="custom-control-input" id="exp_{{ i }}" name="exposicion_previa" [(ngModel)]="registro.exposicion_previa" [value]="item.value" mdbInput>
                                    <label class="custom-control-label" for="exp_{{ i }}">{{ item.label }}</label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="row">
                            <div class="col-sm-12">
                                <mdb-checkbox [(ngModel)]="registro.proteccion_previa">¿Uso protección auditiva?</mdb-checkbox>
                            </div>
                        </div>

                    </div>

                </div>

            </div>


        </div>

         <div class="row">

            <div class="col-xs-12 col-sm-12">

                <div class="titulo_seccion">EXPOSICIÓN ACTUAL A RUIDO</div>

                <div class="form-row">
                    <div class="col-md-4">
                        <div class="row">
                            <div class="col-md-4">
                                <span class="label_radio">Frecuencia</span>
                            </div>
                            <div class="col-md-8 radio_option">
                                <div class="custom-control custom-radio" *ngFor="let item of options_ruido_exposicion; let i = index">
                                    <input type="radio" class="custom-control-input" id="exp2_{{ i }}" name="exposicion_actual" [(ngModel)]="registro.exposicion_actual" [value]="item.value" mdbInput>
                                    <label class="custom-control-label" for="exp2_{{ i }}">{{ item.label }}</label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="row">
                            <div class="col-md-4">
                                <span class="label_radio">Tipo</span>
                            </div>
                            <div class="col-md-8 radio_option">
                                <div class="custom-control custom-radio" *ngFor="let item of options_uso_protectores; let i = index">
                                    <input type="radio" class="custom-control-input" id="exp3_{{ i }}" name="tipo_exposicion" [(ngModel)]="registro.tipo_exposicion" [value]="item.value" mdbInput>
                                    <label class="custom-control-label" for="exp3_{{ i }}">{{ item.label }}</label>
                                </div>
                            </div>
                        </div>

                    </div>

                </div>

                <div class="form-row mt-4">
                    <div class="col-sm-12">
                        <mdb-checkbox [(ngModel)]="registro.exposicion_12_horas">Exposición a ruido en las últimas 12 horas</mdb-checkbox>

                    </div>
                </div>

                <div class="form-row mt-2">
                    <div class="col-sm-12">
                        <mdb-checkbox [(ngModel)]="registro.cambio_altitud">Cambio de altitud geográfica mayor a 1000mt en las últimas 48 horas</mdb-checkbox>

                    </div>
                </div>

                

                 <div class="form-row mt-4">
                    <div class="col-sm-4">
                        <label class="mdb-main-label">Otoscopia Derecho</label>
                        <select2 [data]="options_normal_anormal" [(ngModel)]="registro.otoscopia_od">
                        </select2>
                    </div>

                    <div class="col-sm-4">
                        <label class="mdb-main-label">Otoscopia Izquierdo</label>
                        <select2 [data]="options_normal_anormal" [(ngModel)]="registro.otoscopia_oi">
                        </select2>
                    </div>


                </div>
            </div>
        </div>

        <div class="row mt-4">

            <div class="col-xs-12 col-sm-12">

                <div class="titulo_seccion">DIAGNÓSTICOS EVALUACIÓN</div>

            </div>

        </div>

        <app-diagnosticos-fichas
            [registros]="diagnosticos"
            tipo="1"
            [programa]="programa"
            [clave]="clave"
            [slug]="slug"
            (submitChange)="onSubmitDiagnostico($event)"
        >
        </app-diagnosticos-fichas>

        
        <div class="row mt-2">
            <div class="col-xs-12 col-sm-12">
                <div class="titulo_seccion">ARCHIVOS DE LA EVALUACIÓN</div>              
            </div>
        </div>

        <app-archivos-fichas
            [registros]="archivos"
            [programa]="programa"
            [clave]="clave"
            [slug]="slug"
            (submitChange)="onSubmitArchivo($event)"
        >
        </app-archivos-fichas>

        <div class="row mt-3">

            <div class="col-xs-12 col-sm-12">

                <div class="titulo_seccion">CONCLUSIONES DE EVALUACIÓN</div>
                
            </div>

        </div>

        <div class="form-row mt-n2">
            <div class="col-sm-4">
                <div class="md-form form-sm">
                    <textarea mdbInput type="text" id="recomendaciones" class="md-textarea form-control" [(ngModel)]="registro.recomendaciones"></textarea>
                    <label for="recomendaciones">Recomendaciones</label>
                </div>
            </div>
            <div class="col-sm-4">
                <div class="md-form form-sm">
                    <textarea mdbInput type="text" id="conclusiones" class="md-textarea form-control form-control-sm" [(ngModel)]="registro.conclusiones"></textarea>
                    <label for="conclusiones">Conclusiones</label>
                </div>
            </div>
           
        </div>


        <div class="form-row mt-1">
            <div class="col-sm-2">
                <div class="md-form form-sm">
                    <input mdbInput type="text" id="fecha_examen" class="form-control form-control-sm" [(ngModel)]="registro.fecha_orden" disabled>
                    <label for="fecha_examen" class="">Fecha de Evaluación</label>
                </div>
            </div>

            <div class="col-sm-4">
                <label class="mdb-main-label">Médico Evaluador</label>
                <select2 [data]="options_responsables" [(ngModel)]="registro.responsable">
                </select2>
            </div>

        </div>

        <div class="row mt-4">
            <div class="col-sm-12  d-flex justify-content-center">
                <button mdbBtn size="sm" type="cancel" color="danger" (click)="regresar()">Regresar</button>
                <button mdbBtn size="sm" type="submit" (click)="onSubmit()" [disabled]="disabled" color="primary" class="waves-light" mdbWavesEffect>Continuar</button>
            </div>
        </div>
</div>